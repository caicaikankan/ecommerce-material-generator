<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”µå•†å•†å“ç´ æè‡ªåŠ¨ç”Ÿæˆå·¥å…· v3 - AIæŠ–éŸ³æ–‡æ¡ˆç‰ˆ</title>
    <!-- æœ¬åœ°æ‰“å¼€è¯´æ˜ï¼šç›´æ¥åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ­¤HTMLæ–‡ä»¶å³å¯ä½¿ç”¨ï¼Œæ— éœ€æœ¬åœ°æœåŠ¡å™¨ -->
    <!-- å¼•å…¥Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥Font Awesomeå›¾æ ‡ -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // Tailwindé…ç½®
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#E8384F', // æ¬§è±é›…çº¢
                        secondary: '#1E293B', // æ·±è‰²èƒŒæ™¯
                        accent: '#F59E0B', // å¼ºè°ƒæ©™è‰²
                        success: '#10B981', // æˆåŠŸç»¿è‰²
                        danger: '#EF4444', // å±é™©çº¢è‰²
                        light: '#F8FAFC', // æµ…è‰²æ–‡å­—
                        dark: '#0F172A', // æ·±è‰²èƒŒæ™¯
                        'gray-light': '#334155',
                        'gray-medium': '#64748B',
                        'gray-dark': '#94A3B8',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 2px 15px rgba(0, 0, 0, 0.1)',
                        'hover': '0 8px 25px rgba(0, 0, 0, 0.2)',
                        'glow': '0 0 15px rgba(232, 56, 79, 0.3)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.3s ease-in-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            }
            .text-shadow-lg {
                text-shadow: 0 4px 8px rgba(0,0,0,0.5);
            }
            .watermark {
                position: relative;
            }
            .watermark::after {
                content: "è‰ç¨¿ç‰ˆ";
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%) rotate(-30deg);
                font-size: 3rem;
                font-weight: 800;
                color: rgba(255,255,255,0.08);
                pointer-events: none;
                letter-spacing: 2px;
            }
            .glass-effect {
                background: rgba(30, 41, 59, 0.8);
                backdrop-filter: blur(10px);
                -webkit-backdrop-filter: blur(10px);
            }
            .input-focus {
                @apply focus:ring-2 focus:ring-primary/50 focus:border-primary focus:outline-none transition-all duration-300;
            }
            .btn-hover {
                @apply transition-all duration-300 hover:shadow-md transform hover:-translate-y-0.5;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-dark to-secondary min-h-screen font-sans text-light">
    <!-- å¯¼èˆªæ  -->
    <nav class="fixed top-0 left-0 right-0 z-50 glass-effect border-b border-gray-light/30">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
                    <i class="fa fa-magic text-white text-xl"></i>
                </div>
                <span class="font-bold text-lg text-white">ç´ æç”Ÿæˆå·¥å…· v3</span>
            </div>
            <div class="hidden md:flex items-center gap-6">
                <a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">é¦–é¡µ</a>
                <a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">åŠŸèƒ½</a>
                <a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">æ•™ç¨‹</a>
                <a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">å…³äº</a>
            </div>
            <button class="bg-primary hover:bg-primary/90 text-white px-5 py-2 rounded-lg transition-all duration-300 btn-hover">
                ç™»å½•
            </button>
        </div>
    </nav>

    <!-- é¡µé¢å®¹å™¨ -->
    <div class="container mx-auto px-4 pt-28 pb-16 max-w-7xl">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <header class="mb-12 text-center animate-fade-in">
            <h1 class="text-[clamp(2rem,5vw,3.5rem)] font-bold text-white mb-4 text-shadow">ç”µå•†å•†å“ç´ æè‡ªåŠ¨ç”Ÿæˆå·¥å…· v3</h1>
            <p class="text-gray-dark max-w-2xl mx-auto text-lg mb-8">å¸®åŠ©è¿è¥äººå‘˜å¿«é€Ÿç”Ÿæˆå•†å“ä¸»å›¾è‰ç¨¿å’Œé…å¥—æ–‡æ¡ˆï¼Œæå‡å·¥ä½œæ•ˆç‡</p>
            <div class="flex flex-wrap justify-center gap-4">
                <a href="#main-content" class="bg-primary hover:bg-primary/90 text-white font-medium py-3 px-8 rounded-lg transition-all duration-300 btn-hover shadow-glow">
                    å¼€å§‹ä½¿ç”¨
                </a>
                <a href="#" class="bg-transparent border border-gray-light hover:border-gray-medium text-white font-medium py-3 px-8 rounded-lg transition-all duration-300 btn-hover">
                    äº†è§£æ›´å¤š
                </a>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒº -->
        <main id="main-content" class="flex flex-col lg:flex-row gap-8">
            <!-- å·¦ä¾§ï¼šå•†å“ä¿¡æ¯å½•å…¥åŒº -->
            <section class="w-full lg:w-2/5 glass-effect rounded-2xl shadow-soft p-6 lg:p-8 transition-all duration-300 hover:shadow-hover animate-slide-up border border-gray-light/30">
                <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-light/30">
                    <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center">
                        <i class="fa fa-pencil text-primary"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-white">å•†å“ä¿¡æ¯å½•å…¥</h2>
                </div>
                
                <form id="productForm" class="space-y-6">
                    <!-- å•†å“åç§° -->
                    <div>
                        <label for="productName" class="block text-sm font-medium text-gray-dark mb-2">å•†å“åç§° <span class="text-danger font-medium">*</span></label>
                        <input 
                            type="text" 
                            id="productName" 
                            class="w-full px-4 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white"
                            placeholder="è¯·è¾“å…¥å•†å“å…¨ç§°ï¼Œå¦‚XXå“ç‰Œæ— çº¿è“ç‰™è€³æœº"
                            required
                        >
                    </div>

                    <!-- å•†å“å–ç‚¹ -->
                    <div>
                        <label for="productSellingPoints" class="block text-sm font-medium text-gray-dark mb-2">å•†å“å–ç‚¹ <span class="text-danger font-medium">*</span></label>
                        <textarea 
                            id="productSellingPoints" 
                            rows="4" 
                            class="w-full px-4 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white"
                            placeholder="è¯·è¾“å…¥å•†å“æ ¸å¿ƒå–ç‚¹ï¼Œå¤šä¸ªå–ç‚¹ç”¨é€—å·åˆ†éš”"
                            required
                        ></textarea>
                    </div>

                    <!-- ä»·æ ¼ä¿¡æ¯ -->
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="originalPrice" class="block text-sm font-medium text-gray-dark mb-2">åŸä»·</label>
                            <div class="relative">
                                <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-dark font-medium">Â¥</span>
                                <input 
                                    type="number" 
                                    id="originalPrice" 
                                    min="0" 
                                    step="0.01" 
                                    class="w-full px-10 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white"
                                    placeholder="0.00"
                                >
                            </div>
                        </div>
                        <div>
                            <label for="discountPrice" class="block text-sm font-medium text-gray-dark mb-2">ä¼˜æƒ ä»·</label>
                            <div class="relative">
                                <span class="absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-dark font-medium">Â¥</span>
                                <input 
                                    type="number" 
                                    id="discountPrice" 
                                    min="0" 
                                    step="0.01" 
                                    class="w-full px-10 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white"
                                    placeholder="0.00"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- å›¾ç‰‡ä¸Šä¼  -->
                    <div>
                        <label class="block text-sm font-medium text-gray-dark mb-2">å›¾ç‰‡ä¸Šä¼  <span class="text-danger font-medium">*</span></label>
                        <div class="flex flex-wrap gap-4 mb-3">
                            <div id="imagePreviews" class="flex flex-wrap gap-4"></div>
                            <div 
                                id="uploadArea" 
                                class="w-28 h-28 border-2 border-dashed border-gray-light rounded-xl flex flex-col items-center justify-center cursor-pointer hover:bg-secondary/30 transition-all duration-300 hover:border-primary"
                            >
                                <input 
                                    type="file" 
                                    id="imageUpload" 
                                    accept="image/jpeg,image/png" 
                                    multiple 
                                    class="hidden"
                                    onchange="handleImageUpload(event)"
                                >
                                <i class="fa fa-cloud-upload text-gray-dark text-2xl mb-2"></i>
                                <span class="text-xs text-gray-dark">ç‚¹å‡»ä¸Šä¼ </span>
                                <span class="text-xs text-gray-dark mt-1">1-3å¼ </span>
                            </div>
                        </div>
                        <p class="text-xs text-gray-dark">æ”¯æŒJPG/PNGæ ¼å¼ï¼Œå»ºè®®å°ºå¯¸800*800px</p>
                    </div>

                    <!-- é£æ ¼é€‰æ‹© -->
                    <div>
                        <label for="styleSelect" class="block text-sm font-medium text-gray-dark mb-2">é£æ ¼é€‰æ‹©</label>
                        <div class="relative">
                            <select 
                                id="styleSelect" 
                                class="w-full px-4 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white appearance-none"
                            >
                                <option value="simple">ç®€çº¦é£</option>
                                <option value="promotion">ä¿ƒé”€é£</option>
                                <option value="artistic">æ–‡è‰ºé£</option>
                                <option value="tech">ç§‘æŠ€é£</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-4 text-gray-dark">
                                <i class="fa fa-chevron-down"></i>
                            </div>
                        </div>
                    </div>

                    <!-- ä¿å­˜åˆ°ç´ æåº“é€‰é¡¹ -->
                    <div class="flex items-center gap-2">
                        <input 
                            type="checkbox" 
                            id="saveToLibrary" 
                            class="w-4 h-4 text-primary bg-secondary/50 border-gray-light rounded focus:ring-primary"
                        >
                        <label for="saveToLibrary" class="text-sm text-gray-dark">ä¿å­˜å•†å“ç´ æåˆ°ç´ æåº“ï¼Œæ–¹ä¾¿ä¸‹æ¬¡ä½¿ç”¨</label>
                    </div>

                    <!-- æµ‹è¯•æ•°æ®æŒ‰é’® -->
                    <div class="flex gap-4 py-4">
                        <button 
                            type="button" 
                            id="loadTestDataBtn" 
                            class="flex-1 bg-secondary hover:bg-gray-light text-white font-medium py-3 px-6 rounded-xl btn-hover"
                        >
                            åŠ è½½æµ‹è¯•æ•°æ®
                        </button>
                        <button 
                            type="button" 
                            id="batchTestBtn" 
                            class="flex-1 bg-accent hover:bg-accent/90 text-white font-medium py-3 px-6 rounded-xl btn-hover"
                        >
                            æ‰¹é‡æµ‹è¯•
                        </button>
                    </div>

                    <!-- æ“ä½œæŒ‰é’® -->
                    <div class="flex gap-4 pt-2">
                        <button 
                            type="button" 
                            id="generateBtn" 
                            class="flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-xl btn-hover flex items-center justify-center shadow-glow"
                        >
                            <span id="generateBtnText">ä¸€é”®ç”Ÿæˆç´ æ</span>
                            <span id="loadingSpinner" class="ml-3 hidden">
                                <i class="fa fa-spinner fa-spin"></i>
                            </span>
                        </button>
                        <button 
                            type="button" 
                            id="clearBtn" 
                            class="flex-1 bg-gray-light hover:bg-gray-medium text-white font-medium py-3 px-6 rounded-xl btn-hover"
                        >
                            æ¸…ç©ºè¾“å…¥
                        </button>
                    </div>
                    
                    <div class="mt-6 p-4 rounded-2xl bg-secondary/30 border border-gray-light/30 space-y-3">
                        <div class="flex items-center gap-2 mb-1">
                            <i class="fa fa-microphone text-primary"></i>
                            <h3 class="text-white text-base font-semibold">AIæ–‡æ¡ˆç”Ÿæˆï¼ˆæŠ–éŸ³é£æ ¼ï¼‰</h3>
                        </div>
                        <label for="apiKeyInput" class="block text-sm font-medium text-gray-dark">DeepSeek API Key</label>
                        <div class="flex gap-3">
                            <input 
                                id="apiKeyInput"
                                type="password"
                                placeholder="sk-****************"
                                class="flex-1 px-4 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white"
                            >
                            <button 
                                type="button"
                                id="saveApiKeyBtn"
                                class="bg-secondary hover:bg-gray-light text-white font-medium px-4 rounded-xl btn-hover"
                            >
                                ä¿å­˜
                            </button>
                        </div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <select id="douyinStyleSelect" class="px-4 py-3 border border-gray-light rounded-xl input-focus bg-secondary/50 text-white">
                                <option value="auto">è‡ªåŠ¨å¤šé£æ ¼</option>
                                <option value="çˆ†æ¬¾å®‰åˆ©">çˆ†æ¬¾å®‰åˆ©</option>
                                <option value="ç›´æ’­è¯æœ¯">ç›´æ’­è¯æœ¯</option>
                                <option value="ä¸“ä¸šæµ‹è¯„">ä¸“ä¸šæµ‹è¯„</option>
                                <option value="ç§è‰æ¨è">ç§è‰æ¨è</option>
                                <option value="æ ‡é¢˜å…š">æ ‡é¢˜å…š</option>
                            </select>
                            <button 
                                type="button"
                                id="aiGenerateBtn"
                                class="bg-primary hover:bg-primary/90 text-white font-medium py-3 px-6 rounded-xl btn-hover flex items-center justify-center"
                            >
                                <span id="aiGenerateBtnText">AIç”ŸæˆæŠ–éŸ³æ–‡æ¡ˆ</span>
                                <span id="aiLoadingSpinner" class="ml-3 hidden">
                                    <i class="fa fa-spinner fa-spin"></i>
                                </span>
                            </button>
                        </div>
                        <p class="text-xs text-gray-dark">å¯†é’¥ä»…ä¿å­˜åœ¨æœ¬åœ°æµè§ˆå™¨ï¼Œç”¨äºç›´æ¥è°ƒç”¨å®˜æ–¹APIã€‚</p>
                    </div>
                </form>
            </section>

            <!-- å³ä¾§ï¼šç´ æé¢„è§ˆåŒº -->
            <section class="w-full lg:w-3/5 glass-effect rounded-2xl shadow-soft p-6 lg:p-8 transition-all duration-300 hover:shadow-hover animate-slide-up border border-gray-light/30" style="animation-delay: 0.1s;">
                <div class="flex items-center gap-3 mb-6 pb-4 border-b border-gray-light/30">
                    <div class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center">
                        <i class="fa fa-eye text-primary"></i>
                    </div>
                    <h2 class="text-xl font-semibold text-white">ç´ æé¢„è§ˆ</h2>
                </div>
                
                <!-- ä¸»å›¾é¢„è§ˆ -->
                <div class="mb-10">
                    <h3 class="text-lg font-medium mb-5 flex items-center gap-2 text-white">
                        <i class="fa fa-picture-o text-primary"></i>
                        ä¸»å›¾é¢„è§ˆ
                    </h3>
                    <div id="imagePreviewContainer" class="overflow-x-auto pb-6 scrollbar-hide">
                        <div class="flex gap-6 min-w-max">
                            <!-- ä¸»å›¾é¢„è§ˆå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                            <div class="text-center text-gray-dark py-16 bg-secondary/30 rounded-xl px-8 border border-gray-light/30">
                                <i class="fa fa-image text-5xl mb-4 text-gray-light"></i>
                                <p class="text-gray-dark">ç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹é¢„è§ˆ</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- æ–‡æ¡ˆé¢„è§ˆ -->
                <div>
                    <h3 class="text-lg font-medium mb-5 flex items-center gap-2 text-white">
                        <i class="fa fa-file-text-o text-primary"></i>
                        æ–‡æ¡ˆé¢„è§ˆ
                    </h3>
                    <div id="copySuccessAlert" class="bg-success/20 border border-success/30 text-success px-4 py-3 rounded-lg mb-4 hidden flex items-center gap-2 animate-fade-in">
                        <i class="fa fa-check-circle"></i>
                        <span>æ–‡æ¡ˆå·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿</span>
                    </div>
                    <div id="copywritingPreview" class="space-y-6">
                        <!-- æ–‡æ¡ˆé¢„è§ˆå°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        <div class="text-center text-gray-dark py-16 bg-secondary/30 rounded-xl px-8 border border-gray-light/30">
                            <i class="fa fa-file-text text-5xl mb-4 text-gray-light"></i>
                            <p class="text-gray-dark">ç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹é¢„è§ˆ</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- é¡µè„š -->
    <footer class="bg-dark border-t border-gray-light/30 py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <div class="flex items-center gap-3 mb-4">
                        <div class="w-10 h-10 rounded-full bg-primary flex items-center justify-center">
                            <i class="fa fa-magic text-white text-xl"></i>
                        </div>
                        <span class="font-bold text-lg text-white">ç´ æç”Ÿæˆå·¥å…· v3</span>
                    </div>
                    <p class="text-gray-dark mb-4">å¸®åŠ©è¿è¥äººå‘˜å¿«é€Ÿç”Ÿæˆå•†å“ä¸»å›¾è‰ç¨¿å’Œé…å¥—æ–‡æ¡ˆ</p>
                    <div class="flex gap-4">
                        <a href="#" class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-gray-dark hover:text-white hover:bg-gray-light transition-colors duration-300">
                            <i class="fa fa-weixin"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-gray-dark hover:text-white hover:bg-gray-light transition-colors duration-300">
                            <i class="fa fa-weibo"></i>
                        </a>
                        <a href="#" class="w-10 h-10 rounded-full bg-secondary flex items-center justify-center text-gray-dark hover:text-white hover:bg-gray-light transition-colors duration-300">
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-white mb-4">åŠŸèƒ½</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">ä¸»å›¾ç”Ÿæˆ</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">æ–‡æ¡ˆç”Ÿæˆ</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">æ‰¹é‡å¤„ç†</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">æ¨¡æ¿åº“</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-white mb-4">èµ„æº</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">ä½¿ç”¨æ•™ç¨‹</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">å¸¸è§é—®é¢˜</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">APIæ–‡æ¡£</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">ç´ æåº“</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="font-semibold text-white mb-4">å…³äºæˆ‘ä»¬</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">å…¬å¸ç®€ä»‹</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">è”ç³»æˆ‘ä»¬</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">åŠ å…¥æˆ‘ä»¬</a></li>
                        <li><a href="#" class="text-gray-dark hover:text-white transition-colors duration-300">éšç§æ”¿ç­–</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-gray-light/30 mt-8 pt-8 text-center text-gray-dark">
                <p>Â© 2026 ç´ æç”Ÿæˆå·¥å…· v3. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            </div>
        </div>
    </footer>

    <!-- å›¾ç‰‡æ”¾å¤§é¢„è§ˆæ¨¡æ€æ¡† -->
    <div id="imageModal" class="fixed inset-0 bg-black/90 flex items-center justify-center z-50 hidden animate-fade-in">
        <div class="relative max-w-5xl max-h-[90vh]">
            <img id="modalImage" src="" alt="æ”¾å¤§é¢„è§ˆ" class="max-w-full max-h-[90vh] rounded-xl shadow-2xl">
            <button id="closeModal" class="absolute top-4 right-4 bg-black/40 hover:bg-black/60 text-white rounded-full w-12 h-12 flex items-center justify-center transition-all duration-300 transform hover:scale-110">
                <i class="fa fa-times text-xl"></i>
            </button>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let uploadedImages = [];
        let testProducts = [
            {
                name: "æ—¶å°šå¤ªé˜³é•œ",
                sellingPoints: "é˜²ç´«å¤–çº¿,æ—¶å°šè®¾è®¡,è½»ä¾¿èˆ’é€‚,é«˜æ¸…é•œç‰‡",
                originalPrice: "599",
                discountPrice: "299",
                style: "artistic"
            },
            {
                name: "æ™ºèƒ½æ‰‹è¡¨",
                sellingPoints: "å¥åº·ç›‘æµ‹,è¿åŠ¨è¿½è¸ª,æ™ºèƒ½æé†’,é•¿ç»­èˆª",
                originalPrice: "1299",
                discountPrice: "699",
                style: "tech"
            },
            {
                name: "æ™ºèƒ½æ‰‹æœº",
                sellingPoints: "é«˜æ¸…å±å¹•,å¼ºåŠ²æ€§èƒ½,å¤šæ‘„åƒå¤´,å¿«é€Ÿå……ç”µ",
                originalPrice: "4999",
                discountPrice: "3999",
                style: "promotion"
            }
        ];

        // æ¨¡æ‹Ÿäº§å“å›¾ç‰‡
        const mockImages = [
            "https://picsum.photos/id/96/800/800", // å¤ªé˜³é•œ
            "https://picsum.photos/id/26/800/800", // æ™ºèƒ½æ‰‹è¡¨
            "https://picsum.photos/id/225/800/800" // æ™ºèƒ½æ‰‹æœº
        ];

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ç»‘å®šæŒ‰é’®äº‹ä»¶
            document.getElementById('generateBtn').addEventListener('click', generateMaterials);
            document.getElementById('clearBtn').addEventListener('click', clearForm);
            document.getElementById('closeModal').addEventListener('click', closeModal);
            document.getElementById('uploadArea').addEventListener('click', function() {
                document.getElementById('imageUpload').click();
            });
            
            // æµ‹è¯•æ•°æ®æŒ‰é’®äº‹ä»¶
            document.getElementById('loadTestDataBtn').addEventListener('click', loadTestData);
            document.getElementById('batchTestBtn').addEventListener('click', batchTest);
            document.getElementById('saveApiKeyBtn').addEventListener('click', function() {
                const v = document.getElementById('apiKeyInput').value.trim();
                if (!v) { alert('è¯·è¾“å…¥API Key'); return; }
                localStorage.setItem('deepseek_api_key', v);
                alert('API Keyå·²ä¿å­˜åˆ°æœ¬åœ°æµè§ˆå™¨');
            });
            document.getElementById('aiGenerateBtn').addEventListener('click', aiGenerateCopy);
            const saved = localStorage.getItem('deepseek_api_key');
            if (saved && saved.length > 8) {
                document.getElementById('apiKeyInput').placeholder = 'å·²ä¿å­˜æœ¬åœ°';
            }
            
            // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­æ¨¡æ€æ¡†
            document.getElementById('imageModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        });

        // åŠ è½½æµ‹è¯•æ•°æ®
        function loadTestData() {
            // éšæœºé€‰æ‹©ä¸€ä¸ªæµ‹è¯•äº§å“
            const randomProduct = testProducts[Math.floor(Math.random() * testProducts.length)];
            
            // å¡«å……è¡¨å•æ•°æ®
            document.getElementById('productName').value = randomProduct.name;
            document.getElementById('productSellingPoints').value = randomProduct.sellingPoints;
            document.getElementById('originalPrice').value = randomProduct.originalPrice;
            document.getElementById('discountPrice').value = randomProduct.discountPrice;
            document.getElementById('styleSelect').value = randomProduct.style;
            
            // åŠ è½½æ¨¡æ‹Ÿå›¾ç‰‡
            uploadedImages = [];
            // ä½¿ç”¨fetchè·å–æ¨¡æ‹Ÿå›¾ç‰‡å¹¶è½¬æ¢ä¸ºbase64
            const imageIndex = testProducts.indexOf(randomProduct);
            fetch(mockImages[imageIndex])
                .then(response => response.blob())
                .then(blob => {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImages.push(e.target.result);
                        updateImagePreviews();
                    };
                    reader.readAsDataURL(blob);
                });
            
            // æ˜¾ç¤ºæˆåŠŸæç¤º
            alert('æµ‹è¯•æ•°æ®å·²åŠ è½½ï¼Œç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹æ•ˆæœ');
        }

        // æ‰¹é‡æµ‹è¯•
        function batchTest() {
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const batchTestBtn = document.getElementById('batchTestBtn');
            const originalText = batchTestBtn.textContent;
            batchTestBtn.disabled = true;
            batchTestBtn.innerHTML = '<i class="fa fa-spinner fa-spin mr-2"></i> æµ‹è¯•ä¸­...';
            
            // æ¨¡æ‹Ÿæ‰¹é‡æµ‹è¯•è¿‡ç¨‹
            setTimeout(() => {
                // å…ˆåŠ è½½ç¬¬ä¸€ä¸ªäº§å“çš„æ•°æ®
                const firstProduct = testProducts[0];
                document.getElementById('productName').value = firstProduct.name;
                document.getElementById('productSellingPoints').value = firstProduct.sellingPoints;
                document.getElementById('originalPrice').value = firstProduct.originalPrice;
                document.getElementById('discountPrice').value = firstProduct.discountPrice;
                document.getElementById('styleSelect').value = firstProduct.style;
                
                // åŠ è½½æ¨¡æ‹Ÿå›¾ç‰‡
                uploadedImages = [];
                fetch(mockImages[0])
                    .then(response => response.blob())
                    .then(blob => {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            uploadedImages.push(e.target.result);
                            updateImagePreviews();
                            
                            // æ¢å¤æŒ‰é’®çŠ¶æ€
                            batchTestBtn.disabled = false;
                            batchTestBtn.textContent = originalText;
                            
                            // æ˜¾ç¤ºæ‰¹é‡æµ‹è¯•è¯´æ˜
                            alert('æ‰¹é‡æµ‹è¯•å·²å¯åŠ¨\n\næµç¨‹è¯´æ˜ï¼š\n1. ç³»ç»Ÿå·²åŠ è½½ç¬¬ä¸€ä¸ªæµ‹è¯•äº§å“\n2. ç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹ç”Ÿæˆæ•ˆæœ\n3. æµ‹è¯•å®Œæˆåå¯é€‰æ‹©å…¶ä»–äº§å“ç»§ç»­æµ‹è¯•\n\næ‰¹é‡å¯¼å…¥åŠŸèƒ½ï¼š\n- æ”¯æŒExcelæ‰¹é‡å¯¼å…¥ï¼ˆæ¨¡æ‹Ÿï¼‰\n- æ”¯æŒåœ¨çº¿å½•å…¥å¤šä¸ªå•†å“\n- æ”¯æŒä¿å­˜åˆ°ç´ æåº“');
                        };
                        reader.readAsDataURL(blob);
                    });
            }, 1500);
        }

        // å¤„ç†å›¾ç‰‡ä¸Šä¼ 
        function handleImageUpload(event) {
            const files = event.target.files;
            
            // æ£€æŸ¥æ–‡ä»¶æ•°é‡
            if (uploadedImages.length + files.length > 3) {
                alert('æœ€å¤šåªèƒ½ä¸Šä¼ 3å¼ å›¾ç‰‡');
                return;
            }
            
            // å¤„ç†æ¯ä¸ªæ–‡ä»¶
            Array.from(files).forEach(file => {
                if (file.type === 'image/jpeg' || file.type === 'image/png') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        uploadedImages.push(e.target.result);
                        updateImagePreviews();
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('åªæ”¯æŒJPG/PNGæ ¼å¼çš„å›¾ç‰‡');
                }
            });
            
            // é‡ç½®æ–‡ä»¶è¾“å…¥ï¼Œä»¥ä¾¿å¯ä»¥é‡å¤ä¸Šä¼ ç›¸åŒçš„æ–‡ä»¶
            event.target.value = '';
        }

        // æ›´æ–°å›¾ç‰‡é¢„è§ˆ
        function updateImagePreviews() {
            const previewsContainer = document.getElementById('imagePreviews');
            previewsContainer.innerHTML = '';
            
            uploadedImages.forEach((image, index) => {
                const previewDiv = document.createElement('div');
                previewDiv.className = 'relative w-28 h-28 rounded-lg overflow-hidden border border-gray-light/30';
                
                const img = document.createElement('img');
                img.src = image;
                img.className = 'w-full h-full object-cover';
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'absolute top-1 right-1 bg-primary/50 hover:bg-primary/70 text-white rounded-full w-7 h-7 flex items-center justify-center text-xs transition-all duration-300';
                deleteBtn.innerHTML = '<i class="fa fa-times"></i>';
                deleteBtn.onclick = function() {
                    uploadedImages.splice(index, 1);
                    updateImagePreviews();
                };
                
                previewDiv.appendChild(img);
                previewDiv.appendChild(deleteBtn);
                previewsContainer.appendChild(previewDiv);
            });
        }

        // ç”Ÿæˆç´ æ
        function generateMaterials() {
            // è·å–è¡¨å•æ•°æ®
            const productName = document.getElementById('productName').value.trim();
            const productSellingPoints = document.getElementById('productSellingPoints').value.trim();
            const originalPrice = document.getElementById('originalPrice').value;
            const discountPrice = document.getElementById('discountPrice').value;
            const style = document.getElementById('styleSelect').value;
            
            // è¡¨å•æ ¡éªŒ
            if (!productName) {
                alert('è¯·è¾“å…¥å•†å“åç§°');
                return;
            }
            
            if (!productSellingPoints) {
                alert('è¯·è¾“å…¥å•†å“å–ç‚¹');
                return;
            }
            
            if (uploadedImages.length === 0) {
                alert('è¯·ä¸Šä¼ è‡³å°‘1å¼ å›¾ç‰‡');
                return;
            }
            
            // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
            const generateBtn = document.getElementById('generateBtn');
            const generateBtnText = document.getElementById('generateBtnText');
            const loadingSpinner = document.getElementById('loadingSpinner');
            
            generateBtn.disabled = true;
            generateBtnText.textContent = 'ç”Ÿæˆä¸­...';
            loadingSpinner.classList.remove('hidden');
            
            // æ¨¡æ‹Ÿç”Ÿæˆè¿‡ç¨‹ï¼ˆ2ç§’å»¶è¿Ÿï¼‰
            setTimeout(() => {
                // ç”Ÿæˆä¸»å›¾é¢„è§ˆ
                generateImagePreviews(productName, productSellingPoints, originalPrice, discountPrice, style);
                
                // ç”Ÿæˆæ–‡æ¡ˆé¢„è§ˆ
                generateCopywritingPreviews(productName, productSellingPoints, originalPrice, discountPrice, style);
                
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                generateBtn.disabled = false;
                generateBtnText.textContent = 'ä¸€é”®ç”Ÿæˆç´ æ';
                loadingSpinner.classList.add('hidden');
            }, 2000);
        }

        async function aiGenerateCopy() {
            const productName = document.getElementById('productName').value.trim();
            const productSellingPoints = document.getElementById('productSellingPoints').value.trim();
            const originalPrice = document.getElementById('originalPrice').value;
            const discountPrice = document.getElementById('discountPrice').value;
            const stylePref = document.getElementById('styleSelect').value;
            const douyinStyle = document.getElementById('douyinStyleSelect').value;
            if (!productName || !productSellingPoints) { alert('è¯·å…ˆå¡«å†™å•†å“åç§°å’Œå–ç‚¹'); return; }
            const key = (document.getElementById('apiKeyInput').value.trim() || localStorage.getItem('deepseek_api_key') || '').trim();
            if (!key) { alert('è¯·å…ˆå¡«å†™å¹¶ä¿å­˜DeepSeek API Key'); return; }
            const btn = document.getElementById('aiGenerateBtn');
            const btnText = document.getElementById('aiGenerateBtnText');
            const spin = document.getElementById('aiLoadingSpinner');
            btn.disabled = true; btnText.textContent = 'ç”Ÿæˆä¸­...'; spin.classList.remove('hidden');
            const payload = {
                model: 'deepseek-chat',
                messages: [
                    { role: 'system', content: 'ä½ æ˜¯èµ„æ·±æŠ–éŸ³ç”µå•†æ–‡æ¡ˆåŠ©æ‰‹ï¼Œä½¿ç”¨ç®€æ´ã€æœ‰èŠ‚å¥çš„ä¸­æ–‡è¾“å‡ºï¼Œåˆè§„ä¸”ä¸å¤¸å¤§ã€‚' },
                    { role: 'user', content: buildDouyinPrompt({productName, productSellingPoints, originalPrice, discountPrice, stylePref, douyinStyle}) }
                ],
                stream: false,
                temperature: 0.7
            };
            try {
                const res = await fetch('https://api.deepseek.com/chat/completions', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json', 'Authorization': 'Bearer ' + key },
                    body: JSON.stringify(payload)
                });
                if (!res.ok) { throw new Error('è¯·æ±‚å¤±è´¥ ' + res.status); }
                const data = await res.json();
                const content = data && data.choices && data.choices[0] && data.choices[0].message && data.choices[0].message.content ? data.choices[0].message.content : '';
                renderDouyinCopy(content);
            } catch (e) {
                alert('ç”Ÿæˆå¤±è´¥ï¼š' + e.message);
            } finally {
                btn.disabled = false; btnText.textContent = 'AIç”ŸæˆæŠ–éŸ³æ–‡æ¡ˆ'; spin.classList.add('hidden');
            }
        }

        function buildDouyinPrompt(p) {
            const base = [
                `å•†å“åç§°ï¼š${p.productName}`,
                `å–ç‚¹ï¼š${p.productSellingPoints}`,
                `åŸä»·ï¼š${p.originalPrice || 'æ— '}`,
                `ä¼˜æƒ ä»·ï¼š${p.discountPrice || 'æ— '}`,
                `é¡µé¢é£æ ¼åå¥½ï¼š${p.stylePref}`
            ].join('\n');
            if (p.douyinStyle === 'auto') {
                return `åŸºäºä»¥ä¸‹å•†å“ä¿¡æ¯ï¼Œç”Ÿæˆ5ç§æŠ–éŸ³ç”µå•†é£æ ¼æ–‡æ¡ˆï¼šçˆ†æ¬¾å®‰åˆ©ã€ç›´æ’­è¯æœ¯ã€ä¸“ä¸šæµ‹è¯„ã€ç§è‰æ¨èã€æ ‡é¢˜å…šã€‚æ¯ç§ç»™å‡ºï¼šæ ‡é¢˜(â‰¤18å­—)ã€3æ¡çŸ­å¥å–ç‚¹(æ¯æ¡â‰¤18å­—)ã€å®Œæ•´æ–‡æ¡ˆ(80-120å­—)ã€‚è¯·ç”¨JSONè¿”å›ï¼š{"styles":[{"name":"","title":"","bullets":["","",""],"content":""}]}ã€‚ä¸è¦æ·»åŠ è§£é‡Šæ–‡å­—ã€‚\n\n${base}`;
            }
            return `åŸºäºä»¥ä¸‹å•†å“ä¿¡æ¯ï¼ŒæŒ‰"${p.douyinStyle}"é£æ ¼ç”ŸæˆæŠ–éŸ³ç”µå•†æ–‡æ¡ˆã€‚è¾“å‡ºJSONï¼š{"styles":[{"name":"${p.douyinStyle}","title":"","bullets":["","",""],"content":""}]}ã€‚æ ‡é¢˜â‰¤18å­—ï¼ŒçŸ­å¥å–ç‚¹3æ¡ã€æ¯æ¡â‰¤18å­—ï¼Œå®Œæ•´æ–‡æ¡ˆ80-120å­—ï¼Œåˆè§„ä¸å¤¸å¤§ã€‚\n\n${base}`;
        }

        function renderDouyinCopy(content) {
            const container = document.getElementById('copywritingPreview');
            container.innerHTML = '';
            let parsed = null;
            try {
                parsed = JSON.parse(content);
            } catch (_) {
                parsed = null;
            }
            if (parsed && parsed.styles && Array.isArray(parsed.styles)) {
                parsed.styles.forEach(s => {
                    const card = document.createElement('div');
                    card.className = 'bg-secondary/30 rounded-xl p-5 shadow-soft border border-gray-light/30 transition-all duration-300 hover:shadow-md animate-fade-in';
                    const tag = document.createElement('div');
                    tag.className = 'text-xs font-semibold text-gray-dark mb-3 uppercase tracking-wider';
                    tag.textContent = s.name || 'æŠ–éŸ³æ–‡æ¡ˆ';
                    const title = document.createElement('input');
                    title.type = 'text';
                    title.className = 'w-full text-xl font-semibold mb-3 p-3 border border-gray-light rounded-lg input-focus bg-secondary/50 text-white';
                    title.value = s.title || '';
                    const bullets = document.createElement('ul');
                    bullets.className = 'mb-3';
                    if (Array.isArray(s.bullets)) {
                        s.bullets.forEach(b => {
                            const li = document.createElement('li');
                            li.className = 'text-sm text-gray-light list-disc list-inside';
                            li.textContent = b;
                            bullets.appendChild(li);
                        });
                    }
                    const textarea = document.createElement('textarea');
                    textarea.rows = 6;
                    textarea.className = 'w-full p-3 border border-gray-light rounded-lg input-focus bg-secondary/50 text-white mb-3';
                    textarea.value = s.content || '';
                    const btn = document.createElement('button');
                    btn.type = 'button';
                    btn.className = 'bg-primary/20 hover:bg-primary/30 text-primary text-sm font-medium py-2 px-5 rounded-lg transition-all duration-300 btn-hover flex items-center gap-2';
                    btn.innerHTML = '<i class="fa fa-copy"></i> å¤åˆ¶æ–‡æ¡ˆ';
                    btn.onclick = function() {
                        const txt = `${title.value}\n\n${(s.bullets || []).map(x=>`- ${x}`).join('\n')}\n\n${textarea.value}`;
                        copyToClipboard(txt);
                    };
                    card.appendChild(tag);
                    card.appendChild(title);
                    if (bullets.childElementCount > 0) card.appendChild(bullets);
                    card.appendChild(textarea);
                    card.appendChild(btn);
                    container.appendChild(card);
                });
                return;
            }
            const fallback = document.createElement('div');
            fallback.className = 'bg-secondary/30 rounded-xl p-5 shadow-soft border border-gray-light/30 animate-fade-in';
            const pre = document.createElement('textarea');
            pre.rows = 10;
            pre.className = 'w-full p-3 border border-gray-light rounded-lg input-focus bg-secondary/50 text-white mb-3';
            pre.value = (content || '').trim();
            const btn = document.createElement('button');
            btn.type = 'button';
            btn.className = 'bg-primary/20 hover:bg-primary/30 text-primary text-sm font-medium py-2 px-5 rounded-lg transition-all duration-300 btn-hover flex items-center gap-2';
            btn.innerHTML = '<i class="fa fa-copy"></i> å¤åˆ¶æ–‡æ¡ˆ';
            btn.onclick = function() { copyToClipboard(pre.value); };
            fallback.appendChild(pre);
            fallback.appendChild(btn);
            container.appendChild(fallback);
        }

        // ç”Ÿæˆä¸»å›¾é¢„è§ˆ
        function generateImagePreviews(productName, sellingPoints, originalPrice, discountPrice, style) {
            const container = document.getElementById('imagePreviewContainer').querySelector('.flex');
            container.innerHTML = '';
            
            // ç”Ÿæˆ3å¼ æ¨¡æ‹Ÿä¸»å›¾
            for (let i = 0; i < 3; i++) {
                const imgWrapper = document.createElement('div');
                imgWrapper.className = 'relative watermark cursor-pointer transition-all duration-300 hover:scale-[1.03] hover:shadow-lg';
                imgWrapper.onclick = function() {
                    openModal(uploadedImages[i % uploadedImages.length]);
                };
                
                const imgContainer = document.createElement('div');
                imgContainer.className = 'w-[320px] h-[320px] bg-secondary rounded-xl overflow-hidden shadow-soft flex flex-col border border-gray-light/30';
                
                // å›¾ç‰‡éƒ¨åˆ†
                const imgDiv = document.createElement('div');
                imgDiv.className = 'h-[70%] bg-dark relative';
                
                const img = document.createElement('img');
                img.src = uploadedImages[i % uploadedImages.length];
                img.className = 'w-full h-full object-cover';
                
                imgDiv.appendChild(img);
                
                // æ–‡å­—éƒ¨åˆ†
                const textDiv = document.createElement('div');
                textDiv.className = 'h-[30%] p-4 flex flex-col justify-between';
                
                const nameDiv = document.createElement('div');
                nameDiv.className = 'text-sm font-medium line-clamp-2 text-white';
                nameDiv.textContent = productName;
                
                const priceDiv = document.createElement('div');
                priceDiv.className = 'flex items-center gap-2';
                
                if (discountPrice) {
                    const discountSpan = document.createElement('span');
                    discountSpan.className = 'text-primary font-bold text-lg';
                    discountSpan.textContent = `Â¥${discountPrice}`;
                    priceDiv.appendChild(discountSpan);
                }
                
                if (originalPrice) {
                    const originalSpan = document.createElement('span');
                    originalSpan.className = 'text-gray-dark text-sm line-through';
                    originalSpan.textContent = `Â¥${originalPrice}`;
                    priceDiv.appendChild(originalSpan);
                }
                
                textDiv.appendChild(nameDiv);
                textDiv.appendChild(priceDiv);
                
                imgContainer.appendChild(imgDiv);
                imgContainer.appendChild(textDiv);
                imgWrapper.appendChild(imgContainer);
                container.appendChild(imgWrapper);
            }
        }

        // ç”Ÿæˆæ–‡æ¡ˆé¢„è§ˆ
        function generateCopywritingPreviews(productName, sellingPoints, originalPrice, discountPrice, style) {
            const container = document.getElementById('copywritingPreview');
            container.innerHTML = '';
            
            // æ ¹æ®é€‰æ‹©çš„é£æ ¼ç”Ÿæˆä¸åŒçš„æ–‡æ¡ˆæ¨¡æ¿
            const styleTemplates = {
                simple: {
                    title: `${productName} - å“è´¨ä¹‹é€‰`,
                    content: `ç²¾é€‰ä¼˜è´¨ææ–™ï¼ŒåŒ å¿ƒæ‰“é€ ${productName}ã€‚\n\n${sellingPoints.split(',').map(point => `- ${point.trim()}`).join('\n')}\n\n${discountPrice ? `é™æ—¶ä¼˜æƒ ï¼šÂ¥${discountPrice}` : ''}${originalPrice && discountPrice ? `ï¼ˆåŸä»·ï¼šÂ¥${originalPrice}ï¼‰` : ''}`
                },
                promotion: {
                    title: `ã€é™æ—¶ç‰¹æƒ ã€‘${productName}`,
                    content: `ğŸ”¥ é™æ—¶å¤§ä¿ƒ ğŸ”¥\n${productName}éœ‡æ’¼æ¥è¢­ï¼\n\n${sellingPoints.split(',').map(point => `âœ… ${point.trim()}`).join('\n')}\n\n${discountPrice ? `ğŸ’¥ é™æ—¶ä»·ï¼šÂ¥${discountPrice}` : ''}${originalPrice && discountPrice ? `ï¼ˆåŸä»·ï¼šÂ¥${originalPrice}ï¼Œç«‹çœÂ¥${(originalPrice - discountPrice).toFixed(2)}ï¼‰` : ''}\n\nâ° æ•°é‡æœ‰é™ï¼Œå…ˆåˆ°å…ˆå¾—ï¼`
                },
                artistic: {
                    title: `${productName} - ç”Ÿæ´»ç¾å­¦`,
                    content: `å‘ç°ç”Ÿæ´»ä¸­çš„å°ç¡®å¹¸ï¼Œä»${productName}å¼€å§‹ã€‚\n\n${sellingPoints.split(',').map(point => `â€¢ ${point.trim()}`).join('\n')}\n\n${discountPrice ? `ä¼˜æƒ ä»·ï¼šÂ¥${discountPrice}` : ''}${originalPrice && discountPrice ? `ï¼ˆåŸä»·ï¼šÂ¥${originalPrice}ï¼‰` : ''}\n\nè®©ç¾å¥½è§¦æ‰‹å¯åŠã€‚`
                },
                tech: {
                    title: `${productName} - ç§‘æŠ€æ–°ä½“éªŒ`,
                    content: `å‰æ²¿ç§‘æŠ€ï¼Œå…¨æ–°ä½“éªŒ\n${productName}ä¸ºæ‚¨å¸¦æ¥ä¸ä¸€æ ·çš„ä½¿ç”¨æ„Ÿå—ã€‚\n\n${sellingPoints.split(',').map(point => `âš¡ ${point.trim()}`).join('\n')}\n\n${discountPrice ? `ç§‘æŠ€ä»·ï¼šÂ¥${discountPrice}` : ''}${originalPrice && discountPrice ? `ï¼ˆåŸä»·ï¼šÂ¥${originalPrice}ï¼‰` : ''}\n\nå¼•é¢†ç§‘æŠ€æ½®æµï¼Œä»è¿™é‡Œå¼€å§‹ã€‚`
                }
            };
            
            // ç”Ÿæˆç”¨æˆ·é€‰æ‹©é£æ ¼çš„æ–‡æ¡ˆ
            const selectedTemplate = styleTemplates[style];
            
            const copywritingDiv = document.createElement('div');
            copywritingDiv.className = 'bg-secondary/30 rounded-xl p-5 shadow-soft border border-gray-light/30 transition-all duration-300 hover:shadow-md animate-fade-in';
            
            const styleLabel = document.createElement('div');
            styleLabel.className = 'text-xs font-semibold text-gray-dark mb-3 uppercase tracking-wider';
            styleLabel.textContent = getStyleName(style);
            
            const titleInput = document.createElement('input');
            titleInput.type = 'text';
            titleInput.className = 'w-full text-xl font-semibold mb-4 p-3 border border-gray-light rounded-lg input-focus bg-secondary/50 text-white';
            titleInput.value = selectedTemplate.title;
            
            const contentTextarea = document.createElement('textarea');
            contentTextarea.rows = 7;
            contentTextarea.className = 'w-full p-3 border border-gray-light rounded-lg input-focus bg-secondary/50 text-white mb-4';
            contentTextarea.value = selectedTemplate.content;
            
            const copyBtn = document.createElement('button');
            copyBtn.type = 'button';
            copyBtn.className = 'bg-primary/20 hover:bg-primary/30 text-primary text-sm font-medium py-2 px-5 rounded-lg transition-all duration-300 btn-hover flex items-center gap-2';
            copyBtn.innerHTML = '<i class="fa fa-copy"></i> å¤åˆ¶æ–‡æ¡ˆ';
            copyBtn.onclick = function() {
                const fullCopywriting = `${titleInput.value}\n\n${contentTextarea.value}`;
                copyToClipboard(fullCopywriting);
            };
            
            copywritingDiv.appendChild(styleLabel);
            copywritingDiv.appendChild(titleInput);
            copywritingDiv.appendChild(contentTextarea);
            copywritingDiv.appendChild(copyBtn);
            container.appendChild(copywritingDiv);
        }

        // è·å–é£æ ¼åç§°
        function getStyleName(style) {
            const styleNames = {
                simple: 'ç®€çº¦é£',
                promotion: 'ä¿ƒé”€é£',
                artistic: 'æ–‡è‰ºé£',
                tech: 'ç§‘æŠ€é£'
            };
            return styleNames[style] || style;
        }

        // å¤åˆ¶åˆ°å‰ªè´´æ¿
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
                const alert = document.getElementById('copySuccessAlert');
                alert.classList.remove('hidden');
                setTimeout(() => {
                    alert.classList.add('hidden');
                }, 2000);
            }).catch(function(err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }

        // æ¸…ç©ºè¡¨å•
        function clearForm() {
            document.getElementById('productForm').reset();
            uploadedImages = [];
            updateImagePreviews();
            
            // é‡ç½®é¢„è§ˆåŒº
            const imagePreviewContainer = document.getElementById('imagePreviewContainer').querySelector('.flex');
            imagePreviewContainer.innerHTML = `
                <div class="text-center text-gray-500 py-12">
                    <i class="fa fa-picture-o text-4xl mb-2"></i>
                    <p>ç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹é¢„è§ˆ</p>
                </div>
            `;
            
            const copywritingPreview = document.getElementById('copywritingPreview');
            copywritingPreview.innerHTML = `
                <div class="text-center text-gray-500 py-12">
                    <i class="fa fa-file-text-o text-4xl mb-2"></i>
                    <p>ç‚¹å‡»"ä¸€é”®ç”Ÿæˆç´ æ"æŸ¥çœ‹é¢„è§ˆ</p>
                </div>
            `;
        }

        // æ‰“å¼€å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡†
        function openModal(imageSrc) {
            const modal = document.getElementById('imageModal');
            const modalImage = document.getElementById('modalImage');
            modalImage.src = imageSrc;
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        // å…³é—­å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡†
        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
        }
    </script>
</body>
</html>